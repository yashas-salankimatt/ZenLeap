/*
 * ZenLeap - Relative Tab Navigation Styles
 *
 * This CSS file provides styling for relative tab numbers.
 * The JavaScript component (zenleap.uc.js) sets data attributes on tabs:
 *   - data-zenleap-rel: The relative number to display (0-9, A-F, +)
 *   - data-zenleap-direction: "up", "down", or "current"
 *   - data-zenleap-distance: The numeric distance
 *
 * Include this in your userChrome.css or use it standalone.
 */

/* ============================================
   EXPANDED SIDEBAR MODE
   ============================================ */
@media (-moz-bool-pref: "zen.view.sidebar-expanded") {

  /* Main number badge styling */
  tab:not([zen-glance-tab="true"]) > .tab-stack > .tab-content::after {
    content: attr(data-zenleap-rel) !important;
    font-weight: bold;
    font-size: var(--zenleap-font-size, 80%);
    z-index: 100;
    display: inline-block;
    background-color: var(--zenleap-bg, #505050);
    color: var(--zenleap-color, #e0e0e0);
    text-align: center;
    width: 20px;
    height: 20px;
    line-height: 20px;
    border-radius: var(--zenleap-radius, 4px);
    margin-left: 3px;
    margin-right: 3px;
    font-family: monospace;
    transition: background-color 0.15s ease, color 0.15s ease;
  }

  /* Current tab - highlight with accent color */
  tab[data-zenleap-direction="current"]:not([zen-glance-tab="true"]) > .tab-stack > .tab-content::after {
    background-color: var(--zenleap-current-bg, #61afef) !important;
    color: var(--zenleap-current-color, #1e1e1e) !important;
    font-weight: bold;
  }

  /* Tabs above current (k direction) */
  tab[data-zenleap-direction="up"]:not([zen-glance-tab="true"]) > .tab-stack > .tab-content::after {
    background-color: var(--zenleap-up-bg, #455a6f);
    color: var(--zenleap-up-color, #c0c0c0);
  }

  /* Tabs below current (j direction) */
  tab[data-zenleap-direction="down"]:not([zen-glance-tab="true"]) > .tab-stack > .tab-content::after {
    background-color: var(--zenleap-down-bg, #455a6f);
    color: var(--zenleap-down-color, #c0c0c0);
  }

  /* Hide number on hover to make room for close button */
  tab:not([zen-glance-tab="true"]) > .tab-stack > .tab-content:hover::after {
    opacity: 0;
    width: 0;
    margin: 0;
    transition: opacity 0.1s ease, width 0.1s ease;
  }

  /* Hide close button by default */
  tab .tab-close-button {
    visibility: hidden;
    opacity: 0;
    width: 0;
    margin: 0;
  }

  /* Show close button on hover */
  tab:hover .tab-close-button {
    visibility: visible;
    opacity: 1;
  }
}

/* ============================================
   COMPACT SIDEBAR MODE
   ============================================ */
@media not (-moz-bool-pref: "zen.view.sidebar-expanded") {

  /* Compact mode: small number in corner */
  tab:not([zen-glance-tab="true"]) > .tab-stack > .tab-content::before {
    content: attr(data-zenleap-rel);
    position: absolute;
    top: 2px;
    right: 2px;
    font-weight: bold;
    font-size: var(--zenleap-compact-font-size, 70%);
    z-index: 100;
    color: var(--zenleap-compact-color, #abb2bf);
    font-family: monospace;
    text-shadow: 0 0 2px rgba(0, 0, 0, 0.5);
    transition: color 0.15s ease;
  }

  /* Current tab in compact mode */
  tab[data-zenleap-direction="current"]:not([zen-glance-tab="true"]) > .tab-stack > .tab-content::before {
    color: var(--zenleap-current-color, #61afef) !important;
    text-shadow: 0 0 4px rgba(97, 175, 239, 0.5);
  }
}

/* ============================================
   LEAP MODE ACTIVE STATES
   When Ctrl+Space is pressed, highlight available jump targets
   ============================================ */

/* Leap mode: highlight tabs going up (k direction) */
:root[data-zenleap-active="true"] tab[data-zenleap-direction="up"]:not([zen-glance-tab="true"]) > .tab-stack > .tab-content::after {
  color: #98c379 !important;
  background-color: #2c4a32 !important;
  box-shadow: 0 0 4px rgba(152, 195, 121, 0.4);
}

:root[data-zenleap-active="true"] tab[data-zenleap-direction="up"]:not([zen-glance-tab="true"]) > .tab-stack > .tab-content::before {
  color: #98c379 !important;
  text-shadow: 0 0 4px rgba(152, 195, 121, 0.5);
}

/* Leap mode: highlight tabs going down (j direction) */
:root[data-zenleap-active="true"] tab[data-zenleap-direction="down"]:not([zen-glance-tab="true"]) > .tab-stack > .tab-content::after {
  color: #e5c07b !important;
  background-color: #4a4232 !important;
  box-shadow: 0 0 4px rgba(229, 192, 123, 0.4);
}

:root[data-zenleap-active="true"] tab[data-zenleap-direction="down"]:not([zen-glance-tab="true"]) > .tab-stack > .tab-content::before {
  color: #e5c07b !important;
  text-shadow: 0 0 4px rgba(229, 192, 123, 0.5);
}

/* ============================================
   MARK MODE STYLES
   When in mark mode, gray out non-marked tabs and highlight marked tabs
   ============================================ */

/* Mark mode: gray out all non-marked tabs */
:root[data-zenleap-mark-mode="true"] tab:not([data-zenleap-has-mark="true"]):not([zen-glance-tab="true"]) > .tab-stack > .tab-content::after {
  color: #666666 !important;
  background-color: #505050 !important;
  box-shadow: none !important;
}

:root[data-zenleap-mark-mode="true"] tab:not([data-zenleap-has-mark="true"]):not([zen-glance-tab="true"]) > .tab-stack > .tab-content::before {
  color: #666666 !important;
  text-shadow: none !important;
}

/* Mark mode: keep marked tabs red with enhanced visibility */
:root[data-zenleap-mark-mode="true"] tab[data-zenleap-has-mark="true"]:not([zen-glance-tab="true"]) > .tab-stack > .tab-content::after {
  background-color: #e06c75 !important;
  color: #1e1e1e !important;
  box-shadow: 0 0 8px rgba(224, 108, 117, 0.7) !important;
}

:root[data-zenleap-mark-mode="true"] tab[data-zenleap-has-mark="true"]:not([zen-glance-tab="true"]) > .tab-stack > .tab-content::before {
  color: #e06c75 !important;
  text-shadow: 0 0 6px rgba(224, 108, 117, 0.9) !important;
}

/* ============================================
   LEAP MODE OVERLAY
   The overlay is created by JavaScript, but we can style it here
   ============================================ */

#zenleap-overlay {
  position: fixed !important;
  bottom: 20px !important;
  left: 50% !important;
  transform: translateX(-50%) !important;
  z-index: 10000 !important;
  background: rgba(30, 30, 30, 0.95) !important;
  border: 2px solid #61afef !important;
  border-radius: 8px !important;
  padding: 12px 24px !important;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5) !important;
  pointer-events: none !important;
  animation: zenleap-fadein 0.15s ease-out;
}

@keyframes zenleap-fadein {
  from {
    opacity: 0;
    transform: translateX(-50%) translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
}

#zenleap-overlay-content {
  display: flex !important;
  align-items: center !important;
  gap: 12px !important;
}

#zenleap-mode-label {
  font-size: 14px !important;
  font-weight: bold !important;
  color: #61afef !important;
  font-family: monospace !important;
}

#zenleap-direction-label {
  font-size: 14px !important;
  font-weight: bold !important;
  color: #98c379 !important;
  font-family: monospace !important;
}

#zenleap-hint-label {
  font-size: 12px !important;
  color: #abb2bf !important;
  font-family: monospace !important;
}

#zenleap-overlay.leap-direction-set #zenleap-hint-label {
  color: #e5c07b !important;
}

/* ============================================
   CSS CUSTOM PROPERTIES (for easy customization)
   Add these to :root in your userChrome.css to customize
   ============================================ */
/*
:root {
  --zenleap-font-size: 80%;
  --zenleap-compact-font-size: 70%;
  --zenleap-radius: 4px;

  --zenleap-bg: #505050;
  --zenleap-color: #e0e0e0;

  --zenleap-current-bg: #61afef;
  --zenleap-current-color: #1e1e1e;

  --zenleap-up-bg: #455a6f;
  --zenleap-up-color: #c0c0c0;

  --zenleap-down-bg: #455a6f;
  --zenleap-down-color: #c0c0c0;

  --zenleap-compact-color: #abb2bf;
}
*/
